import{p as q,v as A,w as U,F as B,a as V,d as v,b as E,G as I,n as M,P as y}from"./bootstrap-vEIqJ15Z.js";import{_ as u,n as D}from"./currency-Dtag6qPd.js";import{s as Y}from"./pos-section-switch-DmfccXVX.js";import{a as H,d as $,n as K,b as G,c as W,P as z}from"./ns-pos-shipping-popup-poosFpI_.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as i,c as l,a as o,t as r,r as b,f,B as L,F as x,b as C,g as S,w as k,i as T,e as p,h as O,ay as j,n as N,j as J}from"./runtime-core.esm-bundler-DWZrwskR.js";import{c as Q,a as X,k as Z,n as F}from"./ns-prompt-popup-CVlhnzqe.js";import"./index.es-CL3uzDSn.js";import"./chart-Cjxr_vbl.js";import"./ns-orders-preview-popup-DM_WXa3q.js";const ee={props:["order"],methods:{__,async payOrder(){const e=nsHooks.applyFilters("ns-pay-queue",[ProductsQueue,CustomerQueue,TypeQueue,PaymentQueue]);for(let s in e)try{const d=await new e[s](this.order).run()}catch(a){return console.log(a),!1}}},mounted(){for(let e in nsShortcuts)["ns_pos_keyboard_payment"].includes(e)&&nsHotPress.create("ns_pos_keyboard_payment").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e]!==null?nsShortcuts[e].join("+"):null,s=>{s.preventDefault(),this.payOrder()})},unmounted(){nsHotPress.destroy("ns_pos_keyboard_payment")}},te=o("i",{class:"mr-2 text-2xl lg:text-xl las la-cash-register"},null,-1),se={class:"text-lg hidden md:inline lg:text-2xl"};function oe(e,s,a,d,c,t){return i(),l("div",{onClick:s[0]||(s[0]=n=>t.payOrder()),id:"pay-button",class:"flex-shrink-0 w-1/5 flex items-center font-bold cursor-pointer justify-center bg-green-500 text-white hover:bg-green-600 border-r border-green-600 flex-auto"},[te,o("span",se,r(t.__("Pay")),1)])}const re=g(ee,[["render",oe]]),ne={props:["order"],methods:{__,async kotOrder(){if(this.order.payment_status!=="kot"&&this.order.payments.length>0)return nsSnackBar.error(__("Unable to kot an order which kot status has been updated already.")).subscribe();const e=nsHooks.applyFilters("ns-kot-queue",[ProductsQueue,CustomerQueue,TypeQueue]);for(let a in e)try{const c=await new e[a](this.order).run()}catch{return!1}nsHooks.applyFilters("ns-override-kot-popup",()=>{new Promise((d,c)=>{console.log("KOT.order"),d({title:"kot"})}).then(d=>{this.order.title="kot",this.order.payment_status="kot",POS.order.next(this.order),console.log("this.order",this.order);const c=Popup.show(Q);POS.submitOrder().then(t=>{console.log("this.submitOrder",t),POS.printKotReceipt(t.data.order,"silent"),console.log("result",t),nsSnackBar.success(t.message).subscribe(),c.close()},t=>{console.log(d.message),nsSnackBar.error(t.message).subscribe(),c.close()})}).catch(d=>{console.log(d)})})()}},mounted(){for(let e in nsShortcuts)["ns_pos_keyboard_payment"].includes(e)&&nsHotPress.create("ns_pos_keyboard_payment").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e]!==null?nsShortcuts[e].join("+"):null,s=>{s.preventDefault(),this.payOrder()})},unmounted(){nsHotPress.destroy("ns_pos_keyboard_payment")}},ie=o("i",{class:"mr-2 text-2xl lg:text-xl las la-cash-register"},null,-1),de={class:"text-lg hidden md:inline lg:text-2xl"};function le(e,s,a,d,c,t){return i(),l("div",{onClick:s[0]||(s[0]=n=>t.kotOrder()),id:"kot-button",class:"flex-shrink-0 w-1/5 flex items-center font-bold cursor-pointer justify-center bg-orange-500 text-white hover:bg-orange-600 border-r border-orange-600 flex-auto"},[ie,o("span",de,r(t.__("Kot")),1)])}const ae=g(ne,[["render",le]]),ue={name:"ns-pos-hold-orders",props:["popup"],data(){return{order:{},title:"",show:!0}},mounted(){this.popupCloser(),this.show=POS.getHoldPopupEnabled(),this.show||this.popup.params.resolve({title:this.title}),this.$refs.reference.focus(),this.$refs.reference.select(),this.order=this.popup.params.order,this.title=this.popup.params.order.title||""},methods:{__:u,nsCurrency:D,popupCloser:q,submitHold(){this.popup.close(),this.popup.params.resolve({title:this.title})}}},ce={class:"ns-box shadow-lg w-6/7-screen md:w-3/7-screen lg:w-2/6-screen"},pe={class:"p-2 flex ns-box-header justify-between border-b items-center"},_e={class:"font-semibold"},he={class:"flex-auto ns-box-body"},be={class:"border-b h-16 flex items-center justify-center"},me={class:"text-5xl text-primary"},fe={class:"p-2"},ye={class:"input-group border-2 info"},ve=["placeholder"],xe={class:"p-2"},we={class:"text-secondary"},ge={class:"flex ns-box-footer"};function Pe(e,s,a,d,c,t){const n=b("ns-close-button");return i(),l("div",ce,[o("div",pe,[o("h3",_e,r(t.__("Hold Order")),1),o("div",null,[f(n,{onClick:s[0]||(s[0]=_=>a.popup.close())})])]),o("div",he,[o("div",be,[o("span",me,r(t.nsCurrency(c.order.total)),1)]),o("div",fe,[o("div",ye,[L(o("input",{onKeyup:s[1]||(s[1]=U(_=>t.submitHold(),["enter"])),"onUpdate:modelValue":s[2]||(s[2]=_=>c.title=_),ref:"reference",type:"text",placeholder:t.__("Order Reference"),class:"outline-none rounded border-2 p-2 w-full"},null,40,ve),[[A,c.title]])])]),o("div",xe,[o("p",we,r(t.__("The current order will be set on hold. You can retrieve this order from the pending order button. Providing a reference to it might help you to identify the order more quickly.")),1)])]),o("div",ge,[o("div",{onClick:s[3]||(s[3]=_=>t.submitHold()),class:"cursor-pointer w-1/2 py-3 flex justify-center items-center bg-green-500 text-white font-semibold"},r(t.__("Confirm")),1),o("div",{onClick:s[4]||(s[4]=_=>a.popup.close()),class:"cursor-pointer w-1/2 py-3 flex justify-center items-center bg-error-secondary text-white font-semibold"},r(t.__("Cancel")),1)])])}const ke=g(ue,[["render",Pe]]),Ce={props:["order"],methods:{__,async holdOrder(){if(this.order.payment_status!=="hold"&&this.order.payments.length>0)return nsSnackBar.error(__("Unable to hold an order which payment status has been updated already.")).subscribe();const e=nsHooks.applyFilters("ns-hold-queue",[ProductsQueue,CustomerQueue,TypeQueue]);for(let a in e)try{const c=await new e[a](this.order).run()}catch{return!1}nsHooks.applyFilters("ns-override-hold-popup",()=>{new Promise((d,c)=>{Popup.show(ke,{resolve:d,reject:c,order:this.order})}).then(d=>{this.order.title=d.title,this.order.payment_status="hold",POS.order.next(this.order);const c=Popup.show(Q);POS.submitOrder().then(t=>{POS.printKotReceipt(t.order.id,"silent"),c.close(),nsSnackBar.success(t.message).subscribe()},t=>{c.close(),nsSnackBar.error(t.message).subscribe()})}).catch(d=>{console.log(d)})})()}},mounted(){for(let e in nsShortcuts)["ns_pos_keyboard_hold_order"].includes(e)&&nsHotPress.create("ns_pos_keyboard_hold_order").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e]!==null?nsShortcuts[e].join("+"):null,s=>{s.preventDefault(),this.holdOrder()})},unmounted(){nsHotPress.destroy("ns_pos_keyboard_hold_order")}},Se=o("i",{class:"mr-2 text-2xl lg:text-xl las la-pause"},null,-1),Oe={class:"text-lg hidden md:inline lg:text-2xl"};function Te(e,s,a,d,c,t){return i(),l("div",{onClick:s[0]||(s[0]=n=>t.holdOrder()),id:"hold-button",class:"flex-shrink-0 w-1/5 flex items-center font-bold cursor-pointer justify-center bg-blue-500 text-white border-r hover:bg-blue-600 border-blue-600 flex-auto"},[Se,o("span",Oe,r(t.__("Hold")),1)])}const je=g(Ce,[["render",Te]]),Ne={props:["order","settings"],methods:{__,openDiscountPopup(e,s,a=null){if(!this.settings.products_discount&&s==="product")return nsSnackBar.error(__("You're not allowed to add a discount on the product.")).subscribe();if(!this.settings.cart_discount&&s==="cart")return nsSnackBar.error(__("You're not allowed to add a discount on the cart.")).subscribe();Popup.show(H,{reference:e,type:s,onSubmit(d){s==="product"?POS.updateProduct(e,d,a):s==="cart"&&POS.updateCart(e,d)}},{popupClass:"bg-white h:2/3 shadow-lg xl:w-1/4 lg:w-2/5 md:w-2/3 w-full"})}}},qe=o("i",{class:"mr-2 text-2xl lg:text-xl las la-percent"},null,-1),Be={class:"text-lg hidden md:inline lg:text-2xl"};function De(e,s,a,d,c,t){return i(),l("div",{onClick:s[0]||(s[0]=n=>t.openDiscountPopup(a.order,"cart")),id:"discount-button",class:"flex-shrink-0 w-1/5 flex items-center font-bold cursor-pointer justify-center border-r border-box-edge flex-auto"},[qe,o("span",Be,r(t.__("Discount")),1)])}const Fe=g(Ne,[["render",De]]),Ve={props:["order","settings"],methods:{__,voidOngoingOrder(){POS.voidOrder(this.order)}}},He=o("i",{class:"mr-2 text-2xl lg:text-xl las la-trash"},null,-1),Qe={class:"text-lg hidden md:inline lg:text-2xl"};function Re(e,s,a,d,c,t){return i(),l("div",{onClick:s[0]||(s[0]=n=>t.voidOngoingOrder(a.order)),id:"void-button",class:"flex-shrink-0 w-1/5 flex items-center font-bold cursor-pointer justify-center bg-red-500 text-white border-box-edge hover:bg-red-600 flex-auto"},[He,o("span",Qe,r(t.__("Void")),1)])}const Ae=g(Ve,[["render",Re]]),Ue={name:"ns-pos-note-popup",props:["popup"],data(){return{validation:new B,fields:[{label:u("Note"),name:"note",value:"",description:u("More details about this order"),type:"textarea"},{label:u("Display On Receipt"),name:"note_visibility",value:"",options:[{label:u("Yes"),value:"visible"},{label:u("No"),value:"hidden"}],description:u("Will display the note on the receipt"),type:"switch"}]}},mounted(){this.popupCloser(),this.fields.forEach(e=>{e.name==="note"?e.value=this.popup.params.note:e.name==="note_visibility"&&(e.value=this.popup.params.note_visibility)})},methods:{__:u,popupResolver:V,popupCloser:q,closePopup(){this.popupResolver(!1)},saveNote(){if(!this.validation.validateFields(this.fields)){const e=this.validation.validateFieldsErrors(this.fields);return this.validation.triggerFieldsErrors(this.fields,e),this.$forceUpdate(),v.error(u("Unable to proceed the form is not valid.")).subscribe()}return this.popupResolver(this.validation.extractFields(this.fields))}}},Ee={class:"shadow-lg ns-box w-95vw md:w-3/5-screen lg:w-2/5-screen"},Ie={class:"p-2 flex justify-between items-center border-b ns-box-header"},Me={class:"font-bold"},Ye={class:"p-2"},$e={class:"p-2 flex justify-end border-t ns-box-footer"};function Ke(e,s,a,d,c,t){const n=b("ns-close-button"),_=b("ns-field"),m=b("ns-button");return i(),l("div",Ee,[o("div",Ie,[o("h3",Me,r(t.__("Order Note")),1),o("div",null,[f(n,{onClick:s[0]||(s[0]=h=>t.closePopup())})])]),o("div",Ye,[(i(!0),l(x,null,C(c.fields,(h,w)=>(i(),S(_,{key:w,field:h},null,8,["field"]))),128))]),o("div",$e,[f(m,{type:"info",onClick:s[1]||(s[1]=h=>t.saveNote())},{default:k(()=>[T(r(t.__("Save")),1)]),_:1})])])}const Ge=g(Ue,[["render",Ke]]),We={name:"ns-pos-tax-popup",props:["popup"],data(){return{validation:new B,tax_group:[],order:null,orderSubscriber:null,optionsSubscriber:null,options:{},tax_groups:[],activeTab:"",group_fields:[{label:u("Select Tax"),name:"tax_group_id",description:u("Define the tax that apply to the sale."),type:"select",disabled:!0,value:"",validation:"required",options:[]},{label:u("Type"),name:"tax_type",disabled:!0,value:"",description:u("Define how the tax is computed"),type:"select",validation:"required",options:[{label:u("Exclusive"),value:"exclusive"},{label:u("Inclusive"),value:"inclusive"}]}]}},mounted(){this.loadGroups(),this.popupCloser(),this.activeTab=this.popup.params.activeTab||"settings",this.group_fields.forEach(e=>{e.value=this.popup.params[e.name]||void 0}),this.orderSubscriber=POS.order.subscribe(e=>{this.order=e}),this.optionsSubscriber=POS.options.subscribe(e=>{this.options=e,["variable_vat","products_variable_vat"].includes(this.options.ns_pos_vat)&&this.group_fields.forEach(s=>s.disabled=!1)})},unmounted(){this.orderSubscriber.unsubscribe(),this.optionsSubscriber.unsubscribe()},methods:{__:u,nsCurrency:D,popupCloser:q,popupResolver:V,changeActive(e){this.activeTab=e},closePopup(){this.popupResolver(!1)},saveTax(){if(!this.validation.validateFields(this.group_fields))return v.error(u("Unable to proceed the form is not valid.")).subscribe();const e=this.validation.extractFields(this.group_fields);e.tax_groups=[],this.popupResolver(e)},loadGroups(){E.get("/api/taxes/groups").subscribe(e=>{this.groups=e,this.group_fields.forEach(s=>{s.name==="tax_group_id"&&(s.options=this.groups.map(a=>({label:a.name,value:a.id})))})})}}},ze={class:"ns-box shadow-lg w-95vw md:w-3/5-screen lg:w-2/5-screen"},Le={class:"p-2 flex justify-between items-center border-b ns-box-header"},Je={class:"text-blog"},Xe={class:"p-2 ns-box-body"},Ze={class:"p-2 border-b ns-box-body"},et={class:"flex justify-end p-2"},tt={key:0,class:"p-2"},st={key:0,class:"p-2 text-center text-primary"},ot={key:0,class:"p-2"},rt={class:"border shadow p-2 w-full flex justify-between items-center elevation-surface"};function nt(e,s,a,d,c,t){const n=b("ns-close-button"),_=b("ns-field"),m=b("ns-button"),h=b("ns-tabs-item"),w=b("ns-tabs");return i(),l("div",ze,[o("div",Le,[o("h3",Je,r(t.__("Tax & Summary")),1),o("div",null,[f(n,{onClick:s[0]||(s[0]=P=>t.closePopup())})])]),o("div",Xe,[f(w,{active:c.activeTab,onChangeTab:s[2]||(s[2]=P=>t.changeActive(P))},{default:k(()=>[f(h,{padding:"0",label:t.__("Settings"),identifier:"settings",active:!0},{default:k(()=>[o("div",Ze,[(i(!0),l(x,null,C(c.group_fields,(P,R)=>(i(),S(_,{field:P,key:R},null,8,["field"]))),128))]),o("div",et,[f(m,{onClick:s[1]||(s[1]=P=>t.saveTax()),type:"info"},{default:k(()=>[T(r(t.__("Save")),1)]),_:1})])]),_:1},8,["label"]),f(h,{padding:"0",label:t.__("Summary"),identifier:"summary",active:!1},{default:k(()=>[c.order?(i(),l("div",tt,[(i(!0),l(x,null,C(c.order.taxes,P=>(i(),l("div",{key:P.id,class:"mb-2 border shadow p-2 w-full flex justify-between items-center elevation-surface"},[o("span",null,r(P.name),1),o("span",null,r(t.nsCurrency(P.tax_value)),1)]))),128)),c.order.taxes.length===0?(i(),l("div",st,r(t.__("No tax is active")),1)):p("",!0)])):p("",!0)]),_:1},8,["label"]),f(h,{padding:"0",label:t.__("Product Taxes"),identifier:"product_taxes",active:!1},{default:k(()=>[c.order?(i(),l("div",ot,[o("div",rt,[o("span",null,r(t.__("Product Taxes")),1),o("span",null,r(t.nsCurrency(c.order.products_tax_value)),1)])])):p("",!0)]),_:1},8,["label"])]),_:1},8,["active"])])])}const it=g(We,[["render",nt]]),dt={name:"ns-pos-order-settings",props:["popup"],mounted(){nsHttpClient.get("/api/fields/ns.pos-order-settings").subscribe(e=>{e.forEach(s=>{s.value=this.popup.params.order[s.name]||""}),this.fields=this.validation.createFields(e)},e=>{}),this.popupCloser()},data(){return{fields:[],validation:new B}},methods:{__,popupCloser,popupResolver,closePopup(){this.popupResolver(!1)},saveSettings(){const e=this.validation.extractFields(this.fields);this.popupResolver(e)}}},lt={class:"shadow-lg flex flex-col ns-box w-95vw h-95vh md:w-3/5-screen md:h-3/5-screen lg:w-2/5-screen"},at={class:"p-2 border-b ns-box-header items-center flex justify-between"},ut={class:"text-semibold"},ct={class:"p-2 flex-auto border-b ns-box-body overflow-y-auto"},pt={class:"p-2 flex justify-end ns-box-footer"};function _t(e,s,a,d,c,t){const n=b("ns-close-button"),_=b("ns-field"),m=b("ns-button");return i(),l("div",lt,[o("div",at,[o("h3",ut,r(t.__("Order Settings")),1),o("div",null,[f(n,{onClick:s[0]||(s[0]=h=>t.closePopup())})])]),o("div",ct,[(i(!0),l(x,null,C(c.fields,(h,w)=>(i(),S(_,{field:h,key:w},null,8,["field"]))),128))]),o("div",pt,[f(m,{onClick:s[1]||(s[1]=h=>t.saveSettings()),type:"info"},{default:k(()=>[T(r(t.__("Save")),1)]),_:1})])])}const ht=g(dt,[["render",_t]]),bt={name:"ns-pos-product-price-product",props:["popup"],components:{nsNumpad:X,nsNumpadPlus:Z},computed:{},data(){return{product:{},optionsSubscription:null,options:{},price:0}},mounted(){this.popupCloser(),this.product=this.popup.params.product,this.optionsSubscription=POS.options.subscribe(e=>{this.options=O(e)})},beforeDestroy(){this.optionsSubscription.unsubscribe()},methods:{popupResolver,popupCloser,nsCurrency:D,__,updateProductPrice(e){this.product.unit_price=e},resolveProductPrice(e){this.popupResolver(this.product.unit_price)}}},mt={class:"ns-box shadow-lg w-95vw md:w-3/5-screen lg:w-2/5-screen"},ft={class:"popup-heading ns-box-header"},yt={class:"flex flex-col ns-box-body"},vt={class:"h-16 flex items-center justify-center elevation-surface info font-bold"},xt={class:"text-2xl"};function wt(e,s,a,d,c,t){const n=b("ns-close-button"),_=b("ns-numpad"),m=b("ns-numpad-plus");return i(),l("div",mt,[o("div",ft,[o("h3",null,r(t.__("Product Price")),1),o("div",null,[f(n,{onClick:s[0]||(s[0]=h=>t.popupResolver(!1))})])]),o("div",yt,[o("div",vt,[o("h2",xt,r(t.nsCurrency(c.product.unit_price)),1)]),c.options.ns_pos_numpad==="default"?(i(),S(_,{key:0,floating:c.options.ns_pos_allow_decimal_quantities,onChanged:s[1]||(s[1]=h=>t.updateProductPrice(h)),onNext:s[2]||(s[2]=h=>t.resolveProductPrice(h)),value:c.product.unit_price},null,8,["floating","value"])):p("",!0),c.options.ns_pos_numpad==="advanced"?(i(),S(m,{key:1,onChanged:s[3]||(s[3]=h=>t.updateProductPrice(h)),onNext:s[4]||(s[4]=h=>t.resolveProductPrice(h)),value:c.product.unit_price},null,8,["value"])):p("",!0)])])}const gt=g(bt,[["render",wt]]),Pt={name:"ns-pos-quick-product-popup",props:["popup"],methods:{__:u,popupCloser:q,popupResolver:V,close(){this.popupResolver(!1)},async addProduct(){const e=this.validation.extractFields(this.fields),s=this.fields.filter(t=>typeof t.show>"u"||typeof t.show=="function"&&t.show(e));if(!this.validation.validateFields(s))return v.error(u("Unable to proceed. The form is not valid.")).subscribe();let d=this.validation.extractFields(s);d.$original=()=>({stock_management:"disabled",category_id:0,tax_group:this.tax_groups.filter(t=>parseInt(t.id)===parseInt(d.tax_group_id))[0],tax_group_id:d.tax_group_id,tax_type:d.tax_type}),d.product_type==="product"?(d.unit_name=this.units.filter(t=>t.id===d.unit_id)[0].name,d.quantity=parseFloat(d.quantity),d.unit_price=parseFloat(d.unit_price),d.mode="custom",d.price_with_tax=d.unit_price,d.price_without_tax=d.unit_price,d.tax_value=0):(d.unit_name=u("N/A"),d.unit_price=0,d.quantity=1);const c=await POS.defineQuantities(d,this.units);d.$quantities=()=>c,d=POS.computeProductTax(d),POS.addToCart(d),this.close()},loadData(){this.loaded=!1,I(nsHttpClient.get("/api/units"),nsHttpClient.get("/api/taxes/groups")).subscribe({next:e=>{this.units=e[0],this.tax_groups=e[1],this.fields.filter(s=>{s.name==="tax_group_id"&&(s.options=e[1].map(a=>({label:a.name,value:a.id})),e[1].length>0&&e[1][0].id!==void 0&&(s.value=e[1][0].id||this.options.ns_pos_tax_group)),s.name==="tax_type"&&(s.value=this.options.tax_type||"inclusive"),s.name==="unit_id"&&(s.value=this.options.ns_pos_quick_product_default_unit,s.options=e[0].map(a=>({label:a.name,value:a.id})))}),this.buildForm()},error:e=>{}})},buildForm(){this.fields=this.validation.createFields(this.fields),this.loaded=!0,setTimeout(()=>{this.$el.querySelector("#name").select()},100)}},computed:{form(){return this.validation.extractFields(this.fields)}},data(){return{units:[],options:POS.options.getValue(),tax_groups:[],loaded:!1,validation:new B,fields:[{label:u("Name"),name:"name",type:"text",description:u("Provide a unique name for the product."),validation:"required"},{label:u("Product Type"),name:"product_type",type:"select",description:u("Define the product type."),options:[{label:u("Normal"),value:"product"},{label:u("Dynamic"),value:"dynamic"}],value:"product",validation:"required"},{label:u("Rate"),name:"rate",type:"text",description:u("In case the product is computed based on a percentage, define the rate here."),validation:"required",show(e){return e.product_type==="dynamic"}},{label:u("Unit Price"),name:"unit_price",type:"text",description:u("Define what is the sale price of the item."),validation:"",value:0,show(e){return e.product_type==="product"}},{label:u("Quantity"),name:"quantity",type:"text",value:1,description:u("Set the quantity of the product."),validation:"",show(e){return e.product_type==="product"}},{label:u("Unit"),name:"unit_id",type:"select",options:[],description:u("Assign a unit to the product."),validation:"",show(e){return e.product_type==="product"}},{label:u("Tax Type"),name:"tax_type",type:"select",options:[{label:u("Disabled"),value:""},{label:u("Inclusive"),value:"inclusive"},{label:u("Exclusive"),value:"exclusive"}],description:u("Define what is tax type of the item."),show(e){return e.product_type==="product"}},{label:u("Tax Group"),name:"tax_group_id",type:"select",options:[],description:u("Choose the tax group that should apply to the item."),show(e){return e.product_type==="product"}}]}},mounted(){this.popupCloser(),this.loadData()}},kt={class:"w-95vw flex flex-col h-95vh shadow-lg md:w-3/5-screen lg:w-2/5-screen md:h-3/5-screen ns-box"},Ct={class:"header ns-box-header border-b flex justify-between p-2 items-center"},St={class:"ns-box-body p-2 flex-auto overflow-y-auto"},Ot={key:0,class:"h-full w-full flex justify-center items-center"},Tt={class:"ns-box-footer border-t flex justify-between p-2"},jt=o("div",null,null,-1);function Nt(e,s,a,d,c,t){const n=b("ns-close-button"),_=b("ns-spinner"),m=b("ns-field"),h=b("ns-button");return i(),l("div",kt,[o("div",Ct,[o("h3",null,r(t.__("Product / Service")),1),o("div",null,[f(n,{onClick:s[0]||(s[0]=w=>t.close())})])]),o("div",St,[c.loaded?p("",!0):(i(),l("div",Ot,[f(_)])),c.loaded?(i(!0),l(x,{key:1},C(c.fields,(w,P)=>(i(),l(x,null,[w.show&&w.show(t.form)||!w.show?(i(),S(m,{key:P,field:w},null,8,["field"])):p("",!0)],64))),256)):p("",!0)]),o("div",Tt,[jt,o("div",null,[f(h,{onClick:s[1]||(s[1]=w=>t.addProduct()),type:"info"},{default:k(()=>[T(r(t.__("Create")),1)]),_:1})])])])}const qt=g(Pt,[["render",Nt]]),Bt={name:"ns-pos-cart",data:()=>({popup:null,cartButtons:{},products:[],defaultCartButtons:{nsPosPayButton:j(re),nsPosKotButton:j(ae),nsPosHoldButton:j(je),nsPosDiscountButton:j(Fe),nsPosVoidButton:j(Ae)},visibleSection:null,visibleSectionSubscriber:null,cartButtonsSubscriber:null,optionsSubscriber:null,options:{},typeSubscribe:null,orderSubscribe:null,productSubscribe:null,settingsSubscribe:null,settings:{},types:[],order:O({})}),computed:{selectedType(){return this.order.type?this.order.type.label:"N/A"},isVisible(){return this.visibleSection==="cart"},customerName(){return this.order.customer?`${this.order.customer.first_name||this.order.customer.last_name?this.getFirstName():this.getUserName()}`:"N/A"},couponName(){return u("Apply Coupon")}},mounted(){this.cartButtonsSubscriber=POS.cartButtons.subscribe(e=>{this.cartButtons=e}),this.optionsSubscriber=POS.options.subscribe(e=>{this.options=e}),this.typeSubscribe=POS.types.subscribe(e=>this.types=e),this.orderSubscribe=POS.order.subscribe(e=>{this.order=O(e)}),this.productSubscribe=POS.products.subscribe(e=>{this.products=O(e)}),this.settingsSubscribe=POS.settings.subscribe(e=>{this.settings=O(e)}),this.visibleSectionSubscriber=POS.visibleSection.subscribe(e=>{this.visibleSection=O(e)}),M.addAction("ns-before-cart-reset","ns-pos-cart-buttons",()=>{POS.cartButtons.next(this.defaultCartButtons)});for(let e in nsShortcuts)["ns_pos_keyboard_shipping"].includes(e)&&nsHotPress.create("ns_pos_keyboard_shipping").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e]!==null?nsShortcuts[e].join("+"):null,s=>{s.preventDefault(),this.openShippingPopup()}),["ns_pos_keyboard_note"].includes(e)&&nsHotPress.create("ns_pos_keyboard_note").whenNotVisible([".is-popup"]).whenPressed(nsShortcuts[e]!==null?nsShortcuts[e].join("+"):null,s=>{s.preventDefault(),this.openNotePopup()})},unmounted(){this.visibleSectionSubscriber.unsubscribe(),this.typeSubscribe.unsubscribe(),this.orderSubscribe.unsubscribe(),this.productSubscribe.unsubscribe(),this.settingsSubscribe.unsubscribe(),this.optionsSubscriber.unsubscribe(),this.cartButtonsSubscriber.unsubscribe(),nsHotPress.destroy("ns_pos_keyboard_shipping"),nsHotPress.destroy("ns_pos_keyboard_note")},methods:{__:u,nsCurrency:D,switchTo:Y,getFirstName(){return`${this.order.customer.first_name||""} ${this.order.customer.last_name||""}`},getUserName(){return this.order.customer.username},takeRandomClass(){return"border-gray-500 bg-gray-400 text-white hover:bg-gray-500"},openAddQuickProduct(){new Promise((s,a)=>{y.show(qt,{resolve:s,reject:a})}).then(s=>{}).catch(s=>{})},summarizeCoupons(){const e=this.order.coupons.map(s=>s.value);return e.length>0?e.reduce((s,a)=>s+a):0},serviceCharge(e){var s=0;return e?(s=this.order.subtotal*.1,this.order.service_charge=s,this.order.total=this.order.subtotal+this.order.total_tax_value+this.order.service_charge-this.order.discount):(this.order.service_charge=s,this.order.total=this.order.subtotal+this.order.total_tax_value+this.order.service_charge-this.order.discount),this.order.service_charge},async changeProductPrice(e){if(!this.settings.edit_purchase_price)return v.error(u("You don't have the right to edit the purchase price.")).subscribe();if(e.product_type==="dynamic")return v.error(u("Dynamic product can't have their price updated.")).subscribe();if(this.settings.unit_price_editable)try{const s=await new Promise((d,c)=>y.show(gt,{product:Object.assign({},e),resolve:d,reject:c})),a={...e.$quantities(),custom_price_edit:s};return e.$quantities=()=>a,e.mode="custom",e=POS.computeProductTax(e),POS.recomputeProducts(POS.products.getValue()),POS.refreshCart(),v.success(u("The product price has been updated.")).subscribe()}catch(s){if(s!==!1)throw v.error(s).subscribe(),s}else return v.error(u("The editable price feature is disabled.")).subscribe()},async selectCoupon(){try{const e=await new Promise((s,a)=>{y.show($,{resolve:s,reject:a})})}catch{}},async defineOrderSettings(){if(!this.settings.edit_settings)return v.error(u("You're not allowed to edit the order settings.")).subscribe();try{const e=await new Promise((s,a)=>{y.show(ht,{resolve:s,reject:a,order:this.order})});POS.order.next({...this.order,...e})}catch{}},async openNotePopup(){try{const e=await new Promise((a,d)=>{const c=this.order.note,t=this.order.note_visibility;y.show(Ge,{resolve:a,reject:d,note:c,note_visibility:t})}),s={...this.order,...e};POS.order.next(s)}catch(e){e!==!1&&v.error(e.message).subscribe()}},async selectTaxGroup(e="settings"){try{const s=await new Promise((d,c)=>{const t=this.order.taxes,n=this.order.tax_group_id,_=this.order.tax_type;y.show(it,{resolve:d,reject:c,taxes:t,tax_group_id:n,tax_type:_,activeTab:e})}),a={...this.order,...s};POS.order.next(a),POS.refreshCart()}catch{}},openTaxSummary(){this.selectTaxGroup("summary")},selectCustomer(){y.show(K)},async openDiscountPopup(e,s,a=null){if(!this.settings.products_discount&&s==="product")return v.error(u("You're not allowed to add a discount on the product.")).subscribe();if(!this.settings.cart_discount&&s==="cart")return v.error(u("You're not allowed to add a discount on the cart.")).subscribe();try{const d=await new Promise((c,t)=>{y.show(H,{reference:e,resolve:c,reject:t,type:s,onSubmit(n){s==="product"?POS.updateProduct(e,n,a):s==="cart"&&POS.updateCart(e,n)}},{popupClass:"bg-white h:2/3 shadow-lg xl:w-1/4 lg:w-2/5 md:w-2/3 w-full"})})}catch{}},toggleMode(e,s){if(!this.options.ns_pos_allow_wholesale_price)return v.error(u("Unable to change the price mode. This feature has been disabled.")).subscribe();e.mode==="normal"?y.show(F,{title:u("Enable WholeSale Price"),message:u("Would you like to switch to wholesale price ?"),onAction(a){a&&POS.updateProduct(e,{mode:"wholesale"},s)}}):y.show(F,{title:u("Enable Normal Price"),message:u("Would you like to switch to normal price ?"),onAction(a){a&&POS.updateProduct(e,{mode:"normal"},s)}})},removeUsingIndex(e){y.show(F,{title:u("Confirm Your Action"),message:u("Would you like to delete this product ?"),onAction(s){s&&POS.removeProductUsingIndex(e)}})},allowQuantityModification(e){return e.product_type==="product"},changeQuantity(e,s){this.allowQuantityModification(e)&&new z(e).run({unit_quantity_id:e.unit_quantity_id,unit_name:e.unit_name,$quantities:e.$quantities}).then(d=>{POS.updateProduct(e,d,s)})},openOrderType(){y.show(G)},openShippingPopup(){y.show(W)}}},Dt={id:"pos-cart",class:"flex-auto flex flex-col"},Ft={key:0,id:"tools",class:"flex pl-2 ns-tab"},Vt={key:0,class:"flex items-center justify-center text-sm rounded-full h-6 w-6 bg-green-500 text-white ml-1"},Ht={class:"rounded shadow ns-tab-item flex-auto flex overflow-hidden"},Qt={class:"cart-table flex flex-auto flex-col overflow-hidden"},Rt={id:"cart-toolbox",class:"w-full p-2 border-b"},At={class:"border rounded overflow-hidden"},Ut={class:"flex flex-wrap"},Et={class:"ns-button"},It=o("i",{class:"las la-comment"},null,-1),Mt={class:"ml-1 hidden md:inline-block"},Yt=o("hr",{class:"h-10",style:{width:"1px"}},null,-1),$t={class:"ns-button"},Kt=o("i",{class:"las la-balance-scale-left"},null,-1),Gt={class:"ml-1 hidden md:inline-block"},Wt={key:0,class:"ml-1 rounded-full flex items-center justify-center h-6 w-6 bg-info-secondary text-white"},zt=o("hr",{class:"h-10",style:{width:"1px"}},null,-1),Lt={class:"ns-button"},Jt=o("i",{class:"las la-tags"},null,-1),Xt={class:"ml-1 hidden md:inline-block"},Zt={key:0,class:"ml-1 rounded-full flex items-center justify-center h-6 w-6 bg-info-secondary text-white"},es=o("hr",{class:"h-10",style:{width:"1px"}},null,-1),ts={class:"ns-button"},ss=o("i",{class:"las la-tools"},null,-1),os={class:"ml-1 hidden md:inline-block"},rs=o("hr",{class:"h-10",style:{width:"1px"}},null,-1),ns={key:0,class:"ns-button"},is=o("i",{class:"las la-plus"},null,-1),ds={class:"ml-1 hidden md:inline-block"},ls=o("hr",{class:"h-10",style:{width:"1px"}},null,-1),as={id:"cart-table-header",class:"w-full text-primary font-semibold flex"},us={class:"w-full lg:w-4/6 p-2 border border-l-0 border-t-0"},cs={class:"hidden lg:flex lg:w-1/6 p-2 border-b border-t-0"},ps={class:"hidden lg:flex lg:w-1/6 p-2 border border-r-0 border-t-0"},_s={id:"cart-products-table",class:"flex flex-auto flex-col overflow-auto"},hs={key:0,class:"text-primary flex"},bs={class:"w-full text-center py-4 border-b"},ms=["product-index"],fs={class:"w-full lg:w-4/6 p-2 border border-l-0 border-t-0"},ys={class:"flex justify-between product-details mb-1"},vs={class:"font-semibold"},xs={class:"-mx-1 flex product-options"},ws={class:"px-1"},gs=["onClick"],Ps=o("i",{class:"las la-trash text-xl"},null,-1),ks=[Ps],Cs={key:0,class:"px-1"},Ss=["onClick"],Os=o("i",{class:"las la-award text-xl"},null,-1),Ts=[Os],js={class:"flex justify-between product-controls"},Ns={class:"-mx-1 flex flex-wrap"},qs={class:"px-1 w-1/2 md:w-auto mb-1"},Bs=["onClick"],Ds={class:"px-1 w-1/2 md:w-auto mb-1"},Fs=["onClick"],Vs={key:0},Hs={class:"px-1 w-1/2 md:w-auto mb-1 lg:hidden"},Qs=["onClick"],Rs={class:"px-1 w-1/2 md:w-auto mb-1 lg:hidden"},As={class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},Us=["onClick"],Es={key:0,class:"border-b border-dashed border-info-primary p-2"},Is={class:"hidden lg:flex w-1/6 p-2 border border-r-0 border-t-0 items-center justify-center"},Ms={id:"cart-products-summary",class:"flex"},Ys={key:0,class:"table ns-table w-full text-sm"},$s={width:"200",class:"border p-2"},Ks={width:"200",class:"border p-2"},Gs={width:"200",class:"border p-2 text-right"},Ws={key:0},zs=o("td",{width:"200",class:"border p-2"},null,-1),Ls={width:"200",class:"border p-2"},Js={width:"200",class:"border p-2 text-right"},Xs={width:"200",class:"border p-2"},Zs={width:"200",class:"border p-2"},eo={key:0},to={key:1},so={width:"200",class:"border p-2 text-right"},oo={key:1},ro=o("td",{width:"200",class:"border p-2"},null,-1),no={width:"200",class:"border p-2"},io={class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},lo={width:"200",class:"border p-2 text-right"},ao={key:2,class:"hide",style:{display:"none"}},uo={key:3},co=o("td",{width:"200",class:"border p-2"},null,-1),po={width:"200",class:"border p-2"},_o={width:"200",class:"border p-2 text-right"},ho={class:"success"},bo={width:"200",class:"border p-2"},mo={width:"200",class:"border p-2"},fo={width:"200",class:"border p-2 text-right"},yo={key:1,class:"table ns-table w-full text-sm"},vo={width:"200",class:"border p-2"},xo={width:"200",class:"border p-2"},wo={class:"flex justify-between"},go={key:0},Po=o("td",{width:"200",class:"border p-2"},null,-1),ko={width:"200",class:"border p-2"},Co={width:"200",class:"border p-2 text-right"},So={width:"200",class:"border p-2"},Oo={width:"200",class:"border p-2"},To={class:"flex justify-between items-center"},jo={key:0},No={key:1},qo={key:1},Bo=o("td",{width:"200",class:"border p-2"},null,-1),Do={width:"200",class:"border p-2"},Fo=o("span",null,null,-1),Vo={class:"success"},Ho={width:"200",class:"border p-2"},Qo={width:"200",class:"border p-2"},Ro={class:"flex justify-between w-full"},Ao={class:"h-16 flex flex-shrink-0 border-t border-box-edge",id:"cart-bottom-buttons"},Uo=o("i",{class:"mx-4 rounded-full bg-slate-300 h-5 w-5"},null,-1),Eo=o("div",{class:"text-lg mr-4 hidden md:flex md:flex-auto lg:text-2xl"},[o("div",{class:"h-2 flex-auto bg-slate-200 rounded"})],-1),Io=[Uo,Eo];function Mo(e,s,a,d,c,t){return i(),l("div",Dt,[e.visibleSection==="cart"?(i(),l("div",Ft,[o("div",{onClick:s[0]||(s[0]=n=>t.switchTo("cart")),class:"flex cursor-pointer rounded-tl-lg rounded-tr-lg px-3 py-2 font-semibold active tab"},[o("span",null,r(t.__("Cart")),1),e.order?(i(),l("span",Vt,r(e.order.products.length),1)):p("",!0)]),o("div",{onClick:s[1]||(s[1]=n=>t.switchTo("grid")),class:"cursor-pointer rounded-tl-lg rounded-tr-lg px-3 py-2 border-t border-r border-l inactive tab"},r(t.__("Products")),1)])):p("",!0),o("div",Ht,[o("div",Qt,[o("div",Rt,[o("div",At,[o("div",Ut,[o("div",Et,[o("button",{onClick:s[2]||(s[2]=n=>t.openNotePopup()),class:"w-full h-10 px-3 outline-none"},[It,o("span",Mt,r(t.__("Comments")),1)])]),Yt,o("div",$t,[o("button",{onClick:s[3]||(s[3]=n=>t.selectTaxGroup()),class:"w-full h-10 px-3 outline-none flex items-center"},[Kt,o("span",Gt,r(t.__("Taxes")),1),e.order.taxes&&e.order.taxes.length>0?(i(),l("span",Wt,r(e.order.taxes.length),1)):p("",!0)])]),zt,o("div",Lt,[o("button",{onClick:s[4]||(s[4]=n=>t.selectCoupon()),class:"w-full h-10 px-3 outline-none flex items-center"},[Jt,o("span",Xt,r(t.__("Coupons")),1),e.order.coupons&&e.order.coupons.length>0?(i(),l("span",Zt,r(e.order.coupons.length),1)):p("",!0)])]),es,o("div",ts,[o("button",{onClick:s[5]||(s[5]=n=>t.defineOrderSettings()),class:"w-full h-10 px-3 outline-none flex items-center"},[ss,o("span",os,r(t.__("Settings")),1)])]),rs,e.options.ns_pos_quick_product==="yes"?(i(),l("div",ns,[o("button",{onClick:s[6]||(s[6]=n=>t.openAddQuickProduct()),class:"w-full h-10 px-3 outline-none flex items-center"},[is,o("span",ds,r(t.__("Product")),1)])])):p("",!0),ls])])]),o("div",as,[o("div",us,r(t.__("Product")),1),o("div",cs,r(t.__("Quantity")),1),o("div",ps,r(t.__("Total")),1)]),o("div",_s,[e.products.length===0?(i(),l("div",hs,[o("div",bs,[o("h3",null,r(t.__("No products added...")),1)])])):p("",!0),(i(!0),l(x,null,C(e.products,(n,_)=>(i(),l("div",{"product-index":_,key:n.barcode,class:"product-item flex"},[o("div",fs,[o("div",ys,[o("h3",vs,r(n.name)+" — "+r(n.unit_name),1),o("div",xs,[o("div",ws,[o("a",{onClick:m=>t.removeUsingIndex(_),class:"hover:text-error-secondary cursor-pointer outline-none border-dashed py-1 border-b border-error-secondary text-sm"},ks,8,gs)]),e.options.ns_pos_allow_wholesale_price&&t.allowQuantityModification(n)?(i(),l("div",Cs,[o("a",{class:N([n.mode==="wholesale"?"text-success-secondary border-success-secondary":"border-info-primary","cursor-pointer outline-none border-dashed py-1 border-b text-sm"]),onClick:m=>t.toggleMode(n,_)},Ts,10,Ss)])):p("",!0)])]),o("div",js,[o("div",Ns,[o("div",qs,[o("a",{onClick:m=>t.changeProductPrice(n),class:N([n.mode==="wholesale"?"text-success-secondary hover:text-success-secondary border-success-secondary":"border-info-primary","cursor-pointer outline-none border-dashed py-1 border-b text-sm"])},r(t.__("Price"))+" : "+r(t.nsCurrency(n.unit_price)),11,Bs)]),o("div",Ds,[t.allowQuantityModification(n)?(i(),l("a",{key:0,onClick:m=>t.openDiscountPopup(n,"product",_),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},[T(r(t.__("Discount"))+" ",1),n.discount_type==="percentage"?(i(),l("span",Vs,r(n.discount_percentage)+"%",1)):p("",!0),T(" : "+r(t.nsCurrency(n.discount)),1)],8,Fs)):p("",!0)]),o("div",Hs,[t.allowQuantityModification(n)?(i(),l("a",{key:0,onClick:m=>t.changeQuantity(n,_),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Quantity"))+": "+r(n.quantity),9,Qs)):p("",!0)]),o("div",Rs,[o("span",As,r(t.__("Total :"))+" "+r(t.nsCurrency(n.total_price)),1)])])])]),o("div",{onClick:m=>t.changeQuantity(n,_),class:N([t.allowQuantityModification(n)?"cursor-pointer ns-numpad-key":"","hidden lg:flex w-1/6 p-2 border-b items-center justify-center"])},[t.allowQuantityModification(n)?(i(),l("span",Es,r(n.quantity),1)):p("",!0)],10,Us),o("div",Is,r(t.nsCurrency(n.total_price)),1)],8,ms))),128))]),o("div",Ms,[e.visibleSection==="both"?(i(),l("table",Ys,[o("tr",null,[o("td",$s,[o("a",{onClick:s[7]||(s[7]=n=>t.selectCustomer()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Customer"))+": "+r(t.customerName),1)]),o("td",Ks,r(t.__("Sub Total")),1),o("td",Gs,r(t.nsCurrency(e.order.subtotal)),1)]),e.order.coupons.length>0?(i(),l("tr",Ws,[zs,o("td",Ls,[o("a",{onClick:s[8]||(s[8]=n=>t.selectCoupon()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Coupons")),1)]),o("td",Js,r(t.nsCurrency(t.summarizeCoupons())),1)])):p("",!0),o("tr",null,[o("td",Xs,[o("a",{onClick:s[9]||(s[9]=n=>t.openOrderType()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Type"))+": "+r(t.selectedType),1)]),o("td",Zs,[o("span",null,r(t.__("Discount")),1),e.order.discount_type==="percentage"?(i(),l("span",eo,"("+r(e.order.discount_percentage)+"%)",1)):p("",!0),e.order.discount_type==="flat"?(i(),l("span",to,"("+r(t.__("Flat"))+")",1)):p("",!0)]),o("td",so,[o("a",{onClick:s[10]||(s[10]=n=>t.openDiscountPopup(e.order,"cart")),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.nsCurrency(e.order.discount)),1)])]),e.order.type&&e.order.type.identifier==="dine-in"?(i(),l("tr",oo,[ro,o("td",no,[o("a",io,r(t.__("Service Charge")),1)]),o("td",lo,r(t.nsCurrency(t.serviceCharge(!0))),1)])):(i(),l("tr",ao,r(t.nsCurrency(t.serviceCharge(!1))),1)),e.order.type&&(e.order.type.identifier==="delivery"||e.order.type.identifier==="ubereats"||e.order.type.identifier==="pickmefoods")?(i(),l("tr",uo,[co,o("td",po,[o("a",{onClick:s[11]||(s[11]=n=>t.openShippingPopup()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Shipping")),1)]),o("td",_o,r(t.nsCurrency(e.order.shipping)),1)])):p("",!0),o("tr",ho,[o("td",bo,[e.order&&e.options.ns_pos_tax_type==="exclusive"?(i(),l(x,{key:0},[e.options.ns_pos_price_with_tax==="yes"?(i(),l("a",{key:0,onClick:s[12]||(s[12]=n=>t.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Tax Included"))+": "+r(t.nsCurrency(e.order.total_tax_value+e.order.products_tax_value)),1)):e.options.ns_pos_price_with_tax==="no"?(i(),l("a",{key:1,onClick:s[13]||(s[13]=n=>t.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Tax"))+": "+r(t.nsCurrency(e.order.total_tax_value)),1)):p("",!0)],64)):e.order&&e.options.ns_pos_tax_type==="inclusive"?(i(),l(x,{key:1},[e.options.ns_pos_price_with_tax==="yes"?(i(),l("a",{key:0,onClick:s[14]||(s[14]=n=>t.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Tax Included"))+": "+r(t.nsCurrency(e.order.total_tax_value+(e.order.products_exclusive_tax_value+e.order.products_inclusive_tax_value))),1)):e.options.ns_pos_price_with_tax==="no"?(i(),l("a",{key:1,onClick:s[15]||(s[15]=n=>t.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Tax"))+": "+r(t.nsCurrency(e.order.total_tax_value)),1)):p("",!0)],64)):p("",!0)]),o("td",mo,r(t.__("Total")),1),o("td",fo,r(t.nsCurrency(e.order.total)),1)])])):p("",!0),e.visibleSection==="cart"?(i(),l("table",yo,[o("tr",null,[o("td",vo,[o("a",{onClick:s[16]||(s[16]=n=>t.selectCustomer()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Customer"))+": "+r(t.customerName),1)]),o("td",xo,[o("div",wo,[o("span",null,r(t.__("Sub Total")),1),o("span",null,r(t.nsCurrency(e.order.subtotal)),1)])])]),e.order.coupons.length>0?(i(),l("tr",go,[Po,o("td",ko,[o("a",{onClick:s[17]||(s[17]=n=>t.selectCoupon()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Coupons")),1)]),o("td",Co,r(t.nsCurrency(t.summarizeCoupons())),1)])):p("",!0),o("tr",null,[o("td",So,[o("a",{onClick:s[18]||(s[18]=n=>t.openOrderType()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Type"))+": "+r(t.selectedType),1)]),o("td",Oo,[o("div",To,[o("p",null,[o("span",null,r(t.__("Discount")),1),e.order.discount_type==="percentage"?(i(),l("span",jo,"("+r(e.order.discount_percentage)+"%)",1)):p("",!0),e.order.discount_type==="flat"?(i(),l("span",No,"("+r(t.__("Flat"))+")",1)):p("",!0)]),o("a",{onClick:s[19]||(s[19]=n=>t.openDiscountPopup(e.order,"cart")),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.nsCurrency(e.order.discount)),1)])])]),e.order.type?(i(),l("tr",qo,[Bo,o("td",Do,[o("a",{onClick:s[20]||(s[20]=n=>t.openShippingPopup()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Shipping")),1),Fo])])):p("",!0),o("tr",Vo,[o("td",Ho,[e.order&&e.options.ns_pos_tax_type==="exclusive"?(i(),l(x,{key:0},[e.options.ns_pos_price_with_tax==="yes"?(i(),l("a",{key:0,onClick:s[21]||(s[21]=n=>t.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Tax"))+": "+r(t.nsCurrency(e.order.total_tax_value)),1)):e.options.ns_pos_price_with_tax==="no"?(i(),l("a",{key:1,onClick:s[22]||(s[22]=n=>t.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Tax Inclusive"))+": "+r(t.nsCurrency(e.order.total_tax_value+e.order.products_tax_value)),1)):p("",!0)],64)):e.order&&e.options.ns_pos_tax_type==="inclusive"?(i(),l(x,{key:1},[e.options.ns_pos_price_with_tax==="yes"?(i(),l("a",{key:0,onClick:s[23]||(s[23]=n=>t.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Tax Included"))+": "+r(t.nsCurrency(e.order.total_tax_value)),1)):e.options.ns_pos_price_with_tax==="no"?(i(),l("a",{key:1,onClick:s[24]||(s[24]=n=>t.openTaxSummary()),class:"cursor-pointer outline-none border-dashed py-1 border-b border-info-primary text-sm"},r(t.__("Tax Included"))+": "+r(t.nsCurrency(e.order.total_tax_value+e.order.products_tax_value)),1)):p("",!0)],64)):p("",!0)]),o("td",Qo,[o("div",Ro,[o("span",null,r(t.__("Total")),1),o("span",null,r(t.nsCurrency(e.order.total)),1)])])])])):p("",!0)]),o("div",Ao,[Object.keys(e.cartButtons).length===0?(i(!0),l(x,{key:0},C(new Array(4).fill(),n=>(i(),l("div",{class:N([t.takeRandomClass(),"animate-pulse flex-shrink-0 w-1/4 flex items-center font-bold cursor-pointer justify-center border-r flex-auto"])},Io,2))),256)):p("",!0),(i(!0),l(x,null,C(e.cartButtons,n=>(i(),S(J(n),{order:e.order,settings:e.settings},null,8,["order","settings"]))),256))])])])])}const er=g(Bt,[["render",Mo]]);export{er as default};
